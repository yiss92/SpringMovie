<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="mapper.CommentMapper">
	<insert id="insertComment" parameterType="Comment">
		insert into movie_comment(movie_title,ID,comment,score)
		values(#{movie_title},#{id},#{comment},#{score})
	</insert>
	
	<update id="updateComment" parameterType="Comment">
		update movie_comment set movie_title=#{movie_title},
		comment=#{comment},score=#{score} where comment_num=#{comment_num}
	</update>
	
	<delete id="deleteComment" parameterType="Integer">
	  	delete from movie_comment where comment_num=#{comment_num}
	</delete>

	<select id="selectComment" parameterType="Integer" resultType="Comment">
		select * from movie_comment where comment_num=#{comment_num}
	</select>
	
	<select id="selectCommentList" parameterType="Map" resultType="Comment">
		select * from movie_comment order by comment_num desc 
		limit #{startRow},#{rowCount}
	</select>
	
	<select id="selectCommentCount" resultType="Integer">
		select count(*) from movie_comment
	</select>
	
	<select id="selectBest5" resultType="String">
		select movie_title from movie_comment group by movie_title
 		order by avg(score) desc limit 0,5;
	</select>
	
</mapper>